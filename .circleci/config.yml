version: 2
jobs:
  build:
    working_directory: ~/src
    docker:
      - image: circleci/openjdk:8-jdk-node-browsers
    environment:
      TERM: dumb
      GRADLE_OPTS: -Xmx1024m -XX:MaxMetaspaceSize=256m
    branches:
      only:
        - master
        - development
    steps:
      - checkout
      - run:
          command: |
            cd consumer && ./gradlew --stacktrace --no-daemon check
      - store_artifacts:
          path: build/reports
